---
import HeaderLink from "./HeaderLink.astro";
import { Icon } from "astro-icon/components";
---

<script is:inline>
  document.addEventListener("astro:page-load", () => {
    const handleToggleClick = () => {
      const element = document.documentElement;
      element.classList.toggle("dark");
      console.log(element.classList.contains("dark") ? "dark" : "light");

      const isDark = element.classList.contains("dark");
      localStorage.setItem("theme", isDark ? "dark" : "light");
    };

    document
      .getElementById("themeToggle")
      .addEventListener("click", handleToggleClick);
  });
</script>

<header
  class="sticky top-2 z-50 mx-auto mt-2 max-w-fit rounded-full bg-muted p-2 text-foreground shadow-lg"
>
  <nav>
    <div class="flex content-center items-center gap-2">
      <HeaderLink href="/">Home</HeaderLink>
      <HeaderLink href="/project">Projects</HeaderLink>
      <HeaderLink href="/blog">Blog</HeaderLink>
      <button
        id="themeToggle"
        class="grid size-8 place-content-center rounded bg-secondary text-2xl"
      >
        <Icon name="ic:twotone-light-mode" class="block dark:hidden" />
        <Icon name="ic:twotone-dark-mode" class="hidden dark:block" />
      </button>
    </div>
  </nav>
</header>
